version: 2

models:
  - name: stg_erp__products
    description: > 
      "Staging model for the raw 'products' table from the ERP source system. 
      It applies type casting, standardizes column names, and sets keys for downstream joins."
    
    columns:
      # Chaves Primárias e Estrangeiras
      - name: product_id
        description: "The unique identifier (Primary Key) for the product."
        tests:
          - unique
          - not_null
          
      - name: supplier_fk
        description: "The Foreign Key linking the product to its supplier."
        
      - name: category_fk
        description: "The Foreign Key linking the product to its category."
        
      # Atributos do Produto
      - name: product_name
        description: "The official name of the product."
        
      - name: quantity_per_unit
        description: "The quantity of product in a standard unit (e.g., '10 boxes per case'). Cast as string."
        
      - name: unit_price
        description: "The standard list price of the product."
        
      - name: is_discontinued
        description: "Flag indicating if the product has been discontinued (e.g., 1=Yes, 0=No)."
        tests:
          - accepted_values:
              values: [0, 1]
              
      # Métricas de Estoque
      - name: units_in_stock
        description: "Current number of units available in inventory."
        
      - name: units_on_order
        description: "Number of units currently on order from the supplier."
        
      - name: reorder_level
        description: "The threshold stock level that triggers a new order."